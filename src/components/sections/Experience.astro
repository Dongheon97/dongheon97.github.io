---
import Section from "../ui/Section.astro";
import SectionTitle from "../ui/SectionTitle.astro";
import Container from "../ui/Container.astro";

interface ExperienceItem {
  org: string;
  title: string;
  start: string;
  end: string;
  location?: string;
  bullets: string[];
}

interface Props {
  items: ExperienceItem[];
}

const { items } = Astro.props;

// Split items into left and right columns
const leftItems = items.filter((_, i) => i % 2 === 0);
const rightItems = items.filter((_, i) => i % 2 === 1);
---

<Section id="experience" class="bg-white">
  <Container>
    <SectionTitle title="Experience" subtitle="Professional career history" />

    <div class="relative max-w-6xl mx-auto">
      <!-- Vertical Line -->
      <div
        class="absolute left-4 md:left-1/2 transform md:-translate-x-1/2 top-0 bottom-0 w-1 bg-gray-200"
      >
      </div>

      <!-- Two Column Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-y-6">
        <!-- Left Column -->
        <div class="space-y-20">
          {
            leftItems.map((item) => (
              <div class="relative">
                <!-- Timeline Dot with Briefcase Icon -->
                <div class="absolute left-4 md:left-auto md:right-0 transform md:translate-x-1/2 w-12 h-12 rounded-full bg-blue-600 border-4 border-white shadow-lg z-10 flex items-center justify-center">
                  <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/>
                  </svg>
                </div>

                <!-- Content Card -->
                <div class="pl-12 md:pl-0 md:pr-8">
                  <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300 w-full max-w-xl ml-auto">
                    <div class="flex flex-col gap-2 mb-3">
                      <h3 class="text-xl font-bold text-gray-900">
                        {item.title}
                      </h3>
                      <div class="flex flex-wrap items-center gap-x-3 text-base">
                        <span class="text-blue-600 font-bold">{item.org}</span>
                        <span class="text-gray-300 hidden sm:inline">‚Ä¢</span>
                        <span class="text-gray-500 font-medium">
                          {item.start} ‚Äì {item.end}
                        </span>
                      </div>
                      {item.location && (
                        <p class="text-gray-500 text-sm font-medium">
                          üìç {item.location}
                        </p>
                      )}
                    </div>

                    <ul class="space-y-2 text-gray-700 text-base leading-relaxed">
                      {item.bullets.map((bullet) => (
                        <li class="flex items-start">
                          <span class="mr-3 mt-2 w-1.5 h-1.5 bg-blue-400 rounded-full flex-shrink-0" />
                          <span>{bullet}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>
              </div>
            ))
          }
        </div>

        <!-- Right Column -->
        <div class="space-y-20 md:mt-50">
          {
            rightItems.map((item) => (
              <div class="relative">
                <!-- Timeline Dot with Briefcase Icon -->
                <div class="absolute left-4 md:left-0 transform md:-translate-x-1/2 w-12 h-12 rounded-full bg-blue-600 border-4 border-white shadow-lg z-10 flex items-center justify-center">
                  <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/>
                  </svg>
                </div>

                <!-- Content Card -->
                <div class="pl-12 md:pl-8">
                  <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-300 w-full max-w-xl">
                    <div class="flex flex-col gap-2 mb-3">
                      <h3 class="text-xl font-bold text-gray-900">
                        {item.title}
                      </h3>
                      <div class="flex flex-wrap items-center gap-x-3 text-base">
                        <span class="text-blue-600 font-bold">{item.org}</span>
                        <span class="text-gray-300 hidden sm:inline">‚Ä¢</span>
                        <span class="text-gray-500 font-medium">
                          {item.start} ‚Äì {item.end}
                        </span>
                      </div>
                      {item.location && (
                        <p class="text-gray-500 text-sm font-medium">
                          üìç {item.location}
                        </p>
                      )}
                    </div>

                    <ul class="space-y-2 text-gray-700 text-base leading-relaxed">
                      {item.bullets.map((bullet) => (
                        <li class="flex items-start">
                          <span class="mr-3 mt-2 w-1.5 h-1.5 bg-blue-400 rounded-full flex-shrink-0" />
                          <span>{bullet}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </Container>
</Section>
